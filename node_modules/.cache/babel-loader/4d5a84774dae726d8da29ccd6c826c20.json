{"ast":null,"code":"var _jsxFileName = \"/Users/ltt/github/react-demo/src/components/Carousel/Carousel.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from \"react\";\nimport \"./Carousel.css\";\n/**\n * @param imgList 轮播图列表 title 标题 desc 描述 src 图片链接\n * @param time 轮播时间 默认3s\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Carousel(props) {\n  _s();\n\n  const {\n    imgList,\n    time = 3\n  } = props;\n  const [activeIndex, setActiveIndex] = useState(0);\n  const timer = useRef();\n  /**\n   * 自动轮播\n   */\n\n  const autoLoop = () => {\n    if (timer.current) clearInterval(timer.current);\n    timer.current = setInterval(() => {\n      setActiveIndex(currentIndex => currentIndex === imgList.length - 1 ? 0 : currentIndex + 1);\n    }, time * 1000);\n  };\n  /** \n   * 点击手动切换\n   */\n\n\n  const changeIndex = index => {\n    setActiveIndex(index);\n    autoLoop();\n  };\n  /**\n   * 初始开启自动轮播\n  */\n\n\n  useEffect(() => {\n    autoLoop();\n    return () => {\n      if (timer.current) clearInterval(timer.current);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"carousel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-container\",\n      children: imgList.map((_ref, index) => {\n        let {\n          src,\n          title,\n          desc,\n          style\n        } = _ref;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          style: { ...style,\n            ...{\n              transform: `translateX(${-activeIndex * 100}%)`\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: src,\n            alt: title\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 11\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 16\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n      className: \"process\",\n      children: imgList.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => changeIndex(index),\n          \"aria-label\": \"li\",\n          children: index === activeIndex && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"process_active\",\n            \"data-testid\": \"process_active\",\n            style: {\n              animation: `progress ${time}s linear`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 38\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 16\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 10\n  }, this);\n}\n\n_s(Carousel, \"xN07HdZL6Te4AD4oe41tishRo50=\");\n\n_c = Carousel;\nexport default Carousel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"sources":["/Users/ltt/github/react-demo/src/components/Carousel/Carousel.tsx"],"names":["React","useRef","useState","useEffect","Carousel","props","imgList","time","activeIndex","setActiveIndex","timer","autoLoop","current","clearInterval","setInterval","currentIndex","length","changeIndex","index","map","src","title","desc","style","transform","item","animation"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport \"./Carousel.css\";\n/**\n * @param imgList 轮播图列表 title 标题 desc 描述 src 图片链接\n * @param time 轮播时间 默认3s\n*/\ninterface CarouselProps {\n  imgList: Array<{src: string, title: string, desc: string, style: object}>,\n  time?: number\n}\n\nfunction Carousel(props: CarouselProps) {\n  const { imgList, time = 3 } = props\n  const [activeIndex, setActiveIndex] = useState<number>(0)\n  const timer = useRef<ReturnType<typeof setInterval>>()\n  /**\n   * 自动轮播\n   */\n  const autoLoop = () => {\n    if(timer.current) clearInterval(timer.current)\n    timer.current = setInterval(()=>{\n      setActiveIndex(currentIndex=>currentIndex === imgList.length - 1 ? 0 : currentIndex + 1)\n    }, time * 1000)\n  }\n\n  /** \n   * 点击手动切换\n   */\n  const changeIndex = (index: number) => {\n    setActiveIndex(index)\n    autoLoop()\n  }\n  \n  /**\n   * 初始开启自动轮播\n  */\n  useEffect(()=>{\n    autoLoop()\n    return () => {\n      if (timer.current) clearInterval(timer.current)\n    }\n  }, [])\n\n  return <div className=\"carousel\">\n    <div className=\"carousel-container\">\n    {\n      imgList.map(({ src, title, desc, style }, index)=>{\n        return <div className=\"item\" style={{...style, ...{transform: `translateX(${-activeIndex * 100}%)`}}} key={index}>\n          <h1>{title}</h1>\n          <h3>{desc}</h3>\n          <img src={src} alt={title} key={index} />\n        </div>\n      })\n    }\n    </div>\n    <ol className=\"process\">\n    {\n      \n      imgList.map((item,index)=>{\n        return <li key={index} onClick={()=>changeIndex(index)} aria-label=\"li\">\n          { index === activeIndex && <span className=\"process_active\" data-testid=\"process_active\" style={{animation: `progress ${time}s linear`}}/>}\n        </li>\n      })\n      \n    }\n    </ol>\n  </div>;\n}\n\nexport default Carousel;"]},"metadata":{},"sourceType":"module"}